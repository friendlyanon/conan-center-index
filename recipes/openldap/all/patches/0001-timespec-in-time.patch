--- include/ac/time.h
+++ include/ac/time.h
@@ -25,7 +25,7 @@
 #endif
 # include <time.h>
 
-#if defined(_WIN32) && !defined(HAVE_CLOCK_GETTIME)
+#if defined(_WIN32) && !defined(HAVE_CLOCK_GETTIME) && !defined(TIMESPEC_IN_TIME)
 	struct timespec {
 		time_t	tv_sec;
 		int 	tv_nsec;
--- include/portable.hin
+++ include/portable.hin
@@ -1134,6 +1134,7 @@
 /* define to snprintf routine */
 #undef vsnprintf
 
+#undef TIMESPEC_IN_TIME
 
 /* begin of portable.h.post */
 
